{
  "id": "388dc7c0-c329-4fe7-aad4-5336090ab6f9",
  "prevId": "a3819d46-efe9-4b78-b8df-1d8d40e4ed5e",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.admin_actions": {
      "name": "admin_actions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "admin_id": {
          "name": "admin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "object_type": {
          "name": "object_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "object_id": {
          "name": "object_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "object_label": {
          "name": "object_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_admin_actions_recent": {
          "name": "idx_admin_actions_recent",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "admin_actions_admin_id_fkey": {
          "name": "admin_actions_admin_id_fkey",
          "tableFrom": "admin_actions",
          "tableTo": "admins",
          "columnsFrom": [
            "admin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.admins": {
      "name": "admins",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "auth_user_id": {
          "name": "auth_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "middle_name": {
          "name": "middle_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "role_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'admin'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "admins_email_key": {
          "name": "admins_email_key",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.attendance_batches": {
      "name": "attendance_batches",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "attendance_upload_id": {
          "name": "attendance_upload_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "raw_path": {
          "name": "raw_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "attendees_path": {
          "name": "attendees_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "absentees_path": {
          "name": "absentees_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issues_path": {
          "name": "issues_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "exempted_path": {
          "name": "exempted_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_attendance_batches_created_at": {
          "name": "idx_attendance_batches_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_batches_upload_id": {
          "name": "idx_attendance_batches_upload_id",
          "columns": [
            {
              "expression": "attendance_upload_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_batches_attendance_upload_id_fkey": {
          "name": "attendance_batches_attendance_upload_id_fkey",
          "tableFrom": "attendance_batches",
          "tableTo": "attendance_uploads",
          "columnsFrom": [
            "attendance_upload_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.attendance_issues": {
      "name": "attendance_issues",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "attendance_batch_id": {
          "name": "attendance_batch_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "issue_type": {
          "name": "issue_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_description": {
          "name": "issue_description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_data": {
          "name": "raw_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "resolved": {
          "name": "resolved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_by": {
          "name": "resolved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_attendance_issues_batch_id": {
          "name": "idx_attendance_issues_batch_id",
          "columns": [
            {
              "expression": "attendance_batch_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_issues_issue_type": {
          "name": "idx_attendance_issues_issue_type",
          "columns": [
            {
              "expression": "issue_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_issues_resolved": {
          "name": "idx_attendance_issues_resolved",
          "columns": [
            {
              "expression": "resolved",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_issues_student_id": {
          "name": "idx_attendance_issues_student_id",
          "columns": [
            {
              "expression": "student_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_issues_attendance_batch_id_fkey": {
          "name": "attendance_issues_attendance_batch_id_fkey",
          "tableFrom": "attendance_issues",
          "tableTo": "attendance_batches",
          "columnsFrom": [
            "attendance_batch_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_issues_resolved_by_fkey": {
          "name": "attendance_issues_resolved_by_fkey",
          "tableFrom": "attendance_issues",
          "tableTo": "admins",
          "columnsFrom": [
            "resolved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_issues_student_id_fkey": {
          "name": "attendance_issues_student_id_fkey",
          "tableFrom": "attendance_issues",
          "tableTo": "students",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.attendance_uploads": {
      "name": "attendance_uploads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "file_hash": {
          "name": "file_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "level_id": {
          "name": "level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "storage_path": {
          "name": "storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_at": {
          "name": "uploaded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_attendance_uploads_file_hash": {
          "name": "idx_attendance_uploads_file_hash",
          "columns": [
            {
              "expression": "file_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_uploads_service_level": {
          "name": "idx_attendance_uploads_service_level",
          "columns": [
            {
              "expression": "service_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "level_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_attendance_uploads_uploaded_at": {
          "name": "idx_attendance_uploads_uploaded_at",
          "columns": [
            {
              "expression": "uploaded_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_uploads_level_id_fkey": {
          "name": "attendance_uploads_level_id_fkey",
          "tableFrom": "attendance_uploads",
          "tableTo": "levels",
          "columnsFrom": [
            "level_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_uploads_service_id_fkey": {
          "name": "attendance_uploads_service_id_fkey",
          "tableFrom": "attendance_uploads",
          "tableTo": "services",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_uploads_uploaded_by_fkey": {
          "name": "attendance_uploads_uploaded_by_fkey",
          "tableFrom": "attendance_uploads",
          "tableTo": "admins",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.exeats": {
      "name": "exeats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "period": {
          "name": "period",
          "type": "daterange",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "daterange(start_date, (end_date + 1), '[)'::text)",
            "type": "stored"
          }
        }
      },
      "indexes": {
        "idx_exeats_period_gist": {
          "name": "idx_exeats_period_gist",
          "columns": [
            {
              "expression": "period",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "range_ops"
            }
          ],
          "isUnique": false,
          "where": "(status = 'active'::text)",
          "concurrently": false,
          "method": "gist",
          "with": {}
        }
      },
      "foreignKeys": {
        "exeats_created_by_fkey": {
          "name": "exeats_created_by_fkey",
          "tableFrom": "exeats",
          "tableTo": "admins",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "exeats_student_id_fkey": {
          "name": "exeats_student_id_fkey",
          "tableFrom": "exeats",
          "tableTo": "students",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "exeats_status_check": {
          "name": "exeats_status_check",
          "value": "status = ANY (ARRAY['active'::text, 'ended'::text, 'canceled'::text])"
        }
      },
      "isRLSEnabled": false
    },
    "public.levels": {
      "name": "levels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "levels_code_key": {
          "name": "levels_code_key",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.manual_overrides": {
      "name": "manual_overrides",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level_id": {
          "name": "level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "overridden_by": {
          "name": "overridden_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "override_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "manual_overrides_level_id_fkey": {
          "name": "manual_overrides_level_id_fkey",
          "tableFrom": "manual_overrides",
          "tableTo": "levels",
          "columnsFrom": [
            "level_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "manual_overrides_overridden_by_fkey": {
          "name": "manual_overrides_overridden_by_fkey",
          "tableFrom": "manual_overrides",
          "tableTo": "admins",
          "columnsFrom": [
            "overridden_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "manual_overrides_service_id_fkey": {
          "name": "manual_overrides_service_id_fkey",
          "tableFrom": "manual_overrides",
          "tableTo": "services",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "manual_overrides_student_id_fkey": {
          "name": "manual_overrides_student_id_fkey",
          "tableFrom": "manual_overrides",
          "tableTo": "students",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.override_reason_definitions": {
      "name": "override_reason_definitions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requires_note": {
          "name": "requires_note",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "override_reason_definitions_created_by_fkey": {
          "name": "override_reason_definitions_created_by_fkey",
          "tableFrom": "override_reason_definitions",
          "tableTo": "admins",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "override_reason_definitions_code_key": {
          "name": "override_reason_definitions_code_key",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.semesters": {
      "name": "semesters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.service_levels": {
      "name": "service_levels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "level_id": {
          "name": "level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_service_levels_level_id": {
          "name": "idx_service_levels_level_id",
          "columns": [
            {
              "expression": "level_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_service_levels_service_id": {
          "name": "idx_service_levels_service_id",
          "columns": [
            {
              "expression": "service_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_service_levels_service_level": {
          "name": "idx_service_levels_service_level",
          "columns": [
            {
              "expression": "service_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "level_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "service_levels_level_id_fkey": {
          "name": "service_levels_level_id_fkey",
          "tableFrom": "service_levels",
          "tableTo": "levels",
          "columnsFrom": [
            "level_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "service_levels_service_id_fkey": {
          "name": "service_levels_service_id_fkey",
          "tableFrom": "service_levels",
          "tableTo": "services",
          "columnsFrom": [
            "service_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "service_levels_unique": {
          "name": "service_levels_unique",
          "nullsNotDistinct": false,
          "columns": [
            "service_id",
            "level_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.services": {
      "name": "services",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_date": {
          "name": "service_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "service_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "locked_after_ingestion": {
          "name": "locked_after_ingestion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "service_type": {
          "name": "service_type",
          "type": "service_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "devotion_type": {
          "name": "devotion_type",
          "type": "devotion_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "gender_constraint": {
          "name": "gender_constraint",
          "type": "gender_constraint",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'both'"
        },
        "service_time": {
          "name": "service_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_services_date_status": {
          "name": "idx_services_date_status",
          "columns": [
            {
              "expression": "service_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_date_time": {
          "name": "idx_services_date_time",
          "columns": [
            {
              "expression": "service_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "time_ops"
            },
            {
              "expression": "service_time",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_devotion_type": {
          "name": "idx_services_devotion_type",
          "columns": [
            {
              "expression": "devotion_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_gender_constraint": {
          "name": "idx_services_gender_constraint",
          "columns": [
            {
              "expression": "gender_constraint",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_service_date": {
          "name": "idx_services_service_date",
          "columns": [
            {
              "expression": "service_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_service_type": {
          "name": "idx_services_service_type",
          "columns": [
            {
              "expression": "service_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_services_time": {
          "name": "idx_services_time",
          "columns": [
            {
              "expression": "service_time",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "time_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "services_created_by_fkey": {
          "name": "services_created_by_fkey",
          "tableFrom": "services",
          "tableTo": "admins",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.student_upload_errors": {
      "name": "student_upload_errors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "student_upload_id": {
          "name": "student_upload_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "error_type": {
          "name": "error_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_data": {
          "name": "raw_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_student_upload_errors_error_type": {
          "name": "idx_student_upload_errors_error_type",
          "columns": [
            {
              "expression": "error_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_student_upload_errors_upload_id": {
          "name": "idx_student_upload_errors_upload_id",
          "columns": [
            {
              "expression": "student_upload_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "student_upload_errors_student_upload_id_fkey": {
          "name": "student_upload_errors_student_upload_id_fkey",
          "tableFrom": "student_upload_errors",
          "tableTo": "student_uploads",
          "columnsFrom": [
            "student_upload_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.student_uploads": {
      "name": "student_uploads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "file_hash": {
          "name": "file_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storage_path": {
          "name": "storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_at": {
          "name": "uploaded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_student_uploads_file_hash": {
          "name": "idx_student_uploads_file_hash",
          "columns": [
            {
              "expression": "file_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_student_uploads_uploaded_at": {
          "name": "idx_student_uploads_uploaded_at",
          "columns": [
            {
              "expression": "uploaded_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_student_uploads_uploaded_by": {
          "name": "idx_student_uploads_uploaded_by",
          "columns": [
            {
              "expression": "uploaded_by",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "student_uploads_uploaded_by_fkey": {
          "name": "student_uploads_uploaded_by_fkey",
          "tableFrom": "student_uploads",
          "tableTo": "admins",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.students": {
      "name": "students",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "matric_number": {
          "name": "matric_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "middle_name": {
          "name": "middle_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_email": {
          "name": "parent_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_phone": {
          "name": "parent_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "level_id": {
          "name": "level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "department": {
          "name": "department",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "upload_batch_id": {
          "name": "upload_batch_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_students_level": {
          "name": "idx_students_level",
          "columns": [
            {
              "expression": "level_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "where": "(status = 'active'::text)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_students_matric": {
          "name": "idx_students_matric",
          "columns": [
            {
              "expression": "matric_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "where": "(status = 'active'::text)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_students_upload_batch_id": {
          "name": "idx_students_upload_batch_id",
          "columns": [
            {
              "expression": "upload_batch_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "students_level_id_fkey": {
          "name": "students_level_id_fkey",
          "tableFrom": "students",
          "tableTo": "levels",
          "columnsFrom": [
            "level_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "students_matric_number_key": {
          "name": "students_matric_number_key",
          "nullsNotDistinct": false,
          "columns": [
            "matric_number"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "students_gender_check": {
          "name": "students_gender_check",
          "value": "gender = ANY (ARRAY['male'::text, 'female'::text])"
        },
        "students_status_check": {
          "name": "students_status_check",
          "value": "status = ANY (ARRAY['active'::text, 'inactive'::text])"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.devotion_type": {
      "name": "devotion_type",
      "schema": "public",
      "values": [
        "morning",
        "evening"
      ]
    },
    "public.gender_constraint": {
      "name": "gender_constraint",
      "schema": "public",
      "values": [
        "male",
        "female",
        "both"
      ]
    },
    "public.override_reason": {
      "name": "override_reason",
      "schema": "public",
      "values": [
        "late_exeat",
        "scanning_error",
        "manual_correction",
        "permission",
        "other"
      ]
    },
    "public.role_enum": {
      "name": "role_enum",
      "schema": "public",
      "values": [
        "admin",
        "superadmin"
      ]
    },
    "public.service_status": {
      "name": "service_status",
      "schema": "public",
      "values": [
        "scheduled",
        "active",
        "completed",
        "canceled"
      ]
    },
    "public.service_type": {
      "name": "service_type",
      "schema": "public",
      "values": [
        "devotion",
        "special",
        "seminar"
      ]
    },
    "public.warning_status": {
      "name": "warning_status",
      "schema": "public",
      "values": [
        "none",
        "pending",
        "sent"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.vw_recent_admin_actions": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "object_type": {
          "name": "object_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "object_label": {
          "name": "object_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_name": {
          "name": "admin_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT aa.id, aa.action, aa.created_at, aa.object_type, aa.object_label, concat(a.first_name, ' ', a.last_name) AS admin_name FROM admin_actions aa JOIN admins a ON aa.admin_id = a.id ORDER BY aa.created_at DESC LIMIT 50",
      "name": "vw_recent_admin_actions",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.vw_service_level_details": {
      "columns": {
        "service_id": {
          "name": "service_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "service_name": {
          "name": "service_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_date": {
          "name": "service_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "service_time": {
          "name": "service_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "service_type": {
          "name": "service_type",
          "type": "service_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "level_id": {
          "name": "level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level_code": {
          "name": "level_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "level_name": {
          "name": "level_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT s.id AS service_id, s.name AS service_name, s.service_date, s.service_time, s.service_type, l.id AS level_id, l.code AS level_code, l.name AS level_name, sl.created_at AS assigned_at FROM services s JOIN service_levels sl ON s.id = sl.service_id JOIN levels l ON sl.level_id = l.id ORDER BY s.service_date DESC, s.service_time, l.code",
      "name": "vw_service_level_details",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.vw_services_with_datetime": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_date": {
          "name": "service_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "service_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "locked_after_ingestion": {
          "name": "locked_after_ingestion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "service_type": {
          "name": "service_type",
          "type": "service_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "devotion_type": {
          "name": "devotion_type",
          "type": "devotion_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "gender_constraint": {
          "name": "gender_constraint",
          "type": "gender_constraint",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "service_time": {
          "name": "service_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "service_datetime": {
          "name": "service_datetime",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT id, name, service_date, status, created_by, created_at, locked_after_ingestion, service_type, devotion_type, gender_constraint, service_time, service_date + service_time AS service_datetime FROM services",
      "name": "vw_services_with_datetime",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.vw_services_with_levels": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_date": {
          "name": "service_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "service_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "locked_after_ingestion": {
          "name": "locked_after_ingestion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "service_type": {
          "name": "service_type",
          "type": "service_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "devotion_type": {
          "name": "devotion_type",
          "type": "devotion_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "gender_constraint": {
          "name": "gender_constraint",
          "type": "gender_constraint",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "service_time": {
          "name": "service_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "level_codes": {
          "name": "level_codes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "level_names": {
          "name": "level_names",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "level_count": {
          "name": "level_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT s.id, s.name, s.service_date, s.status, s.created_by, s.created_at, s.locked_after_ingestion, s.service_type, s.devotion_type, s.gender_constraint, s.service_time, array_agg(l.code ORDER BY l.code) AS level_codes, array_agg(l.name ORDER BY l.code) AS level_names, count(sl.level_id) AS level_count FROM services s LEFT JOIN service_levels sl ON s.id = sl.service_id LEFT JOIN levels l ON sl.level_id = l.id GROUP BY s.id, s.name, s.service_date, s.service_time, s.service_type, s.devotion_type, s.gender_constraint, s.status, s.created_at",
      "name": "vw_services_with_levels",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}